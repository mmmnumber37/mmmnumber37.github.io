import{u as $,a as D}from"./use-dark.0b791828.js";import{p as k,c as E,h as q,g as C,r as j,N as _,O as z,o as N,I as A,P as U,R as K,S as T,l as x,K as I,L,U as Q,d as V,j as B,u as M,V as W,W as X,X as Y,m as Z,Y as G,Z as H,$ as J,a0 as ee,F as re}from"./index.c16f95ca.js";import{h as y}from"./render.e76746ce.js";import{a as te,Q as R}from"./QInput.edfd6c5e.js";var le=k({name:"QCard",props:{...$,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:t}){const a=C(),u=D(e,a.proxy.$q),s=E(()=>"q-card"+(u.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>q(e.tag,{class:s.value},y(t.default))}}),de=k({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const a=E(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>q(e.tag,{class:a.value},y(t.default))}}),ae=k({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(e,{slots:t,emit:a}){const u=C(),s=j(null);let o=0;const n=[];function l(r){const i=[],p=typeof r=="boolean"?r:e.noErrorFocus!==!0,F=++o,S=(g,d)=>{a("validation-"+(g===!0?"success":"error"),d)};for(let g=0;g<n.length;g++){const d=n[g],h=d.validate();if(typeof h.then=="function")i.push(h.then(b=>({valid:b,comp:d}),b=>({valid:!1,comp:d,err:b})));else if(h!==!0){if(e.greedy===!1)return S(!1,d),p===!0&&typeof d.focus=="function"&&d.focus(),Promise.resolve(!1);i.push({valid:!1,comp:d})}}return i.length===0?(S(!0),Promise.resolve(!0)):Promise.all(i).then(g=>{const d=g.filter(O=>O.valid!==!0);if(d.length===0)return F===o&&S(!0),!0;const{valid:h,comp:b,err:P}=d[0];return F===o&&(P!==void 0&&console.error(P),S(!1,b),p===!0&&h!==!0&&typeof b.focus=="function"&&b.focus()),!1})}function f(){o++,n.forEach(r=>{typeof r.resetValidation=="function"&&r.resetValidation()})}function m(r){r!==void 0&&A(r);const i=o+1;l().then(p=>{i===o&&p===!0&&(e.onSubmit!==void 0?a("submit",r):r!==void 0&&r.target!==void 0&&typeof r.target.submit=="function"&&r.target.submit())})}function c(r){r!==void 0&&A(r),a("reset"),U(()=>{f(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){te(()=>{if(s.value===null)return;const r=s.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(s.value.querySelectorAll("[tabindex]"),i=>i.tabIndex>-1);r!=null&&r.focus({preventScroll:!0})})}K(T,{bindComponent(r){n.push(r)},unbindComponent(r){const i=n.indexOf(r);i>-1&&n.splice(i,1)}});let w=!1;return _(()=>{w=!0}),z(()=>{w===!0&&e.autofocus===!0&&v()}),N(()=>{e.autofocus===!0&&v()}),Object.assign(u.proxy,{validate:l,resetValidation:f,submit:m,reset:c,focus:v,getValidationComponents:()=>n}),()=>q("form",{class:"q-form",ref:s,onSubmit:m,onReset:c},y(t.default))}});const ce={__name:"LoginForm",props:{email:{required:!0,type:String},password:{required:!0,type:String},validationErrors:{required:!1,type:Object,default(){return{}}}},emits:["update:email","update:password"],setup(e,{emit:t}){return(a,u)=>(x(),I(B(ae),null,{default:L(()=>{var s,o,n,l,f,m;return[Q(a.$slots,"top"),V(B(R),{filled:"",label:"Email","model-value":e.email,error:!!((s=e.validationErrors)!=null&&s.email),"error-message":(n=(o=e.validationErrors)==null?void 0:o.email)==null?void 0:n[0],class:"q-mb-md","hide-bottom-space":"","onUpdate:modelValue":u[0]||(u[0]=c=>t("update:email",c))},null,8,["model-value","error","error-message"]),V(B(R),{filled:"",type:"password",label:"Password","model-value":e.password,error:!!((l=e.validationErrors)!=null&&l.password),"error-message":(m=(f=e.validationErrors)==null?void 0:f.password)==null?void 0:m[0],class:"q-mb-sm","hide-bottom-space":"","onUpdate:modelValue":u[1]||(u[1]=c=>t("update:password",c))},null,8,["model-value","error","error-message"]),Q(a.$slots,"bottom")]}),_:3}))}};var fe=()=>{const e=M(),{form:t,loading:a,errors:u,hasErrors:s,validationErrors:o,hasValidationErrors:n,login:l,isReauthenticating:f,resetForm:m,resetErrors:c}=W(),{user:v}=X();async function w(){c(),await l(),s.value||e.push({path:"/"})}function r(){e.push({name:"auth.requestPasswordReset"})}function i(){var p;typeof t.value.email=="string"&&((p=v.value)==null?void 0:p.email)&&(t.value.email=v.value.email)}return{onLoginClicked:w,onForgotPasswordClicked:r,form:t,loading:a,errors:u,hasErrors:s,validationErrors:o,hasValidationErrors:n,login:l,resetForm:m,isReauthenticating:f,attemptSetEmailOnForm:i}},oe=k({name:"QBanner",props:{...$,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(e,{slots:t}){const a=C(),u=D(e,a.proxy.$q),s=E(()=>"q-banner row items-center"+(e.dense===!0?" q-banner--dense":"")+(u.value===!0?" q-banner--dark q-dark":"")+(e.rounded===!0?" rounded-borders":"")),o=E(()=>`q-banner__actions row items-center justify-end col-${e.inlineActions===!0?"auto":"all"}`);return()=>{const n=[q("div",{class:"q-banner__avatar col-auto row items-center self-start"},y(t.avatar)),q("div",{class:"q-banner__content col text-body2"},y(t.default))],l=y(t.action);return l!==void 0&&n.push(q("div",{class:o.value},l)),q("div",{class:s.value+(e.inlineActions===!1&&l!==void 0?" q-banner--top-padding":""),role:"alert"},n)}}});const me={__name:"ErrorsBanner",props:{errors:{required:!0,type:Array},class:{required:!1,type:[Object,Array,String],default:"bg-negative q-mt-sm text-white"},rounded:{required:!1,type:Boolean,default:!0}},setup(e){const a=Y(e,"class");return(u,s)=>(x(!0),Z(re,null,G(e.errors,o=>(x(),I(oe,ee({key:o.message,rounded:e.rounded,class:B(a)},u.$attrs),{default:L(()=>[H(J(o.message),1)]),_:2},1040,["rounded","class"]))),128))}};export{de as Q,ce as _,me as a,le as b,ae as c,fe as u};
