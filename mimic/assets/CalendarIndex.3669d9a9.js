import{d as C,D as I,a as Q,g as V,I as D,x as B,Q as L}from"./FirebaseConfig.9b6e7e2a.js";import{Q as x,a as q,u as E}from"./use-quasar.96e9c557.js";import{Q as N}from"./QCheckbox.d08550d4.js";import{Q as S,a as $,b as h}from"./QList.bf36e443.js";import{c as M,h as P,i as T,R as Y}from"./QBtn.ea3b92c2.js";import{c as f,h as U,_ as z,G as F,r as v,o as R,H as l,I as y,J as r,K as c,d as s,X as u,N as G,F as H,L as J,B as K,P as w,M as X}from"./index.003a5765.js";import{Q as j,l as A}from"./lodash.a67330a8.js";import"./format.e3cb4f10.js";import"./use-dark.3a7095f7.js";var O=M({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:d}){const n=f(()=>parseInt(e.lines,10)),i=f(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(n.value===1?" ellipsis":"")),_=f(()=>e.lines!==void 0&&n.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":n.value}:null);return()=>U("div",{style:_.value,class:i.value},P(d.default))}});const W=F({components:{},setup(){const e=v(C.formatDate(Date.now(),"YYYY/MM/DD")),d=E(),n=v(!1),i=v(!1),_=v(),m=v(),p=async()=>{console.log("getCalendar"),n.value=!0;try{const a=I(Q,"calendar"),o=await V(a);m.value=o.docs.map(b=>({...b.data(),id:b.id})),console.log("asdf - ",[m.value,o.docs])}catch(a){_.value=a}finally{n.value=!1}};R(()=>{p()});const t=f(()=>{var a;return(a=m.value)==null?void 0:a.map(o=>o.date)}),g=f(()=>{var a;return(a=A.exports.cloneDeep(m.value))==null?void 0:a.filter(o=>o.date===e.value)});return{dateLocal:e,dateEvents:t,events:g,updateTask:async a=>{i.value=!0;try{await D(B(Q,"calendar",a.id),a.task,{merge:!0}),await p()}catch(o){console.error(o),d.notify({message:o.message,color:"red"})}finally{i.value=!1}},isLoading:n,isLoadingEvent:i}}}),Z={key:0,class:"tt"},ee={key:1,class:"row"},ae={class:"col-12"},te={key:2,class:"ttt"},se={key:3,class:"row"},oe={key:0};function le(e,d,n,i,_,m){return l(),y(x,null,{default:r(()=>{var p;return[e.isLoading?(l(),c("div",Z,[s(L,{indeterminate:"",size:"45px",thickness:1,color:"grey-8","track-color":"lime",class:"q-ma-md"})])):u("",!0),e.isLoading?u("",!0):(l(),c("div",ee,[G("div",ae,[s(q,{class:"full-width calendar",modelValue:e.dateLocal,"onUpdate:modelValue":d[0]||(d[0]=t=>e.dateLocal=t),events:e.dateEvents,"first-day-of-week":"1","today-btn":""},null,8,["modelValue","events"])])])),e.isLoadingEvent?(l(),c("div",te,[s(L,{indeterminate:"",size:"45px",thickness:1,color:"grey-8","track-color":"lime",class:"q-ma-md"})])):u("",!0),e.isLoadingEvent?u("",!0):(l(),c("div",se,[(p=e.events)!=null&&p.length?(l(),y(S,{key:0,bordered:"",separator:"",class:"col"},{default:r(()=>[(l(!0),c(H,null,J(e.events,(t,g)=>K((l(),y($,{key:g,tag:"label"},{default:r(()=>[s(h,{side:"",top:""},{default:r(()=>[s(N,{modelValue:t.check,"onUpdate:modelValue":[k=>t.check=k,k=>e.updateTask({id:t.id,task:{check:k}})]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),s(h,null,{default:r(()=>[s(O,null,{default:r(()=>[t.count?(l(),c("span",oe,"("+w(t.count)+")",1)):u("",!0),X(" "+w(t.name),1)]),_:2},1024)]),_:2},1024),s(h,{side:""})]),_:2},1024)),[[Y]])),128))]),_:1})):u("",!0)])),s(j,{position:"bottom-right",offset:[18,18]},{default:r(()=>[s(T,{round:"",color:"accent",icon:"add",to:"/calendar/add"})]),_:1})]}),_:1})}var fe=z(W,[["render",le],["__scopeId","data-v-1fe7b4e0"]]);export{fe as default};
