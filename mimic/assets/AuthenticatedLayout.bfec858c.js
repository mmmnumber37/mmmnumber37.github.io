import{Q as U,a as te}from"./QBtn.11a0397c.js";import{Q as I,a as M,b as Pe,c as ke,d as Ee,e as Se}from"./QLayout.94341328.js";import{Q as Te}from"./QItemLabel.abea7af2.js";import{Q as q,a as oe,b as re}from"./QItem.177a628f.js";import{l as c,K as h,L as r,U as z,j as o,M as T,p as Qe,r as Q,c as V,w as A,E as G,y as K,x as Z,a7 as xe,h as J,G as Ue,g as $e,I as Le,d as a,Z as x,a8 as Ve,W as Oe,H as qe,m as se,a9 as De,a0 as ne,u as He,aa as Ae,Q as Ie,F as Me,ab as Fe,ac as Re,$ as Ne}from"./index.cabe7b82.js";import{u as je,a as Be,v as X,b as We,c as ze,d as Ge,e as Ke,f as Ze,g as Je,r as Y,s as Xe,p as ee,h as Ye,Q as le,C as ea,i as aa}from"./ClosePopup.bf2daf7f.js";import{c as ta,u as oa,Q as ie,_ as ra,a as ue,b as de}from"./ErrorsBanner.9678b63c.js";import{Q as O}from"./QInput.1413c0f9.js";import{u as sa,a as na,b as la,c as ia,d as ae}from"./selection.d5c5c7ad.js";import{h as ua}from"./render.82ce0840.js";import{_ as da}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.4a257a98.js";import"./format.e3cb4f10.js";import"./QCircularProgress.4a517e7b.js";import"./use-form.f5f3c83b.js";const ma={__name:"UpdatePasswordForm",props:{email:{required:!1,type:String,default:null},currentPassword:{required:!1,type:String,default:null},password:{required:!0,type:String},passwordConfirmation:{required:!1,type:String,default:null},validationErrors:{required:!1,type:Object,default(){return{}}}},emits:["update:email","update:currentPassword","update:password","update:passwordConfirmation"],setup(e,{emit:s}){return(t,n)=>(c(),h(o(ta),null,{default:r(()=>{var l,d,f,i,m,p,P,k,E,y,g,b;return[z(t.$slots,"top"),typeof e.email=="string"?(c(),h(o(O),{key:0,filled:"",label:"Email","model-value":e.email,error:!!((l=e.validationErrors)!=null&&l.email),"error-message":(f=(d=e.validationErrors)==null?void 0:d.email)==null?void 0:f[0],class:"q-mb-md","hide-bottom-space":"","onUpdate:modelValue":n[0]||(n[0]=v=>s("update:email",v))},null,8,["model-value","error","error-message"])):T("",!0),typeof e.currentPassword=="string"?(c(),h(o(O),{key:1,filled:"",type:"password",label:"Current Password","model-value":e.currentPassword,error:!!((i=e.validationErrors)!=null&&i.current_password),"error-message":(p=(m=e.validationErrors)==null?void 0:m.current_password)==null?void 0:p[0],class:"q-mb-lg","hide-bottom-space":"","onUpdate:modelValue":n[1]||(n[1]=v=>s("update:currentPassword",v))},null,8,["model-value","error","error-message"])):T("",!0),typeof e.password=="string"?(c(),h(o(O),{key:2,filled:"",type:"password",label:"New Password","model-value":e.password,error:!!((P=e.validationErrors)!=null&&P.password),"error-message":(E=(k=e.validationErrors)==null?void 0:k.password)==null?void 0:E[0],class:"q-mb-sm","hide-bottom-space":"","onUpdate:modelValue":n[2]||(n[2]=v=>s("update:password",v))},null,8,["model-value","error","error-message"])):T("",!0),typeof e.passwordConfirmation=="string"?(c(),h(o(O),{key:3,filled:"",type:"password",label:"Confirm New Password","model-value":e.passwordConfirmation,error:!!((y=e.validationErrors)!=null&&y.password_confirmation),"error-message":(b=(g=e.validationErrors)==null?void 0:g.password_confirmation)==null?void 0:b[0],class:"q-mb-sm","hide-bottom-space":"","onUpdate:modelValue":n[3]||(n[3]=v=>s("update:passwordConfirmation",v))},null,8,["model-value","error","error-message"])):T("",!0),z(t.$slots,"bottom")]}),_:3}))}};var ca=Qe({name:"QTooltip",inheritAttrs:!1,props:{...je,...sa,...Be,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:X},self:{type:String,default:"top middle",validator:X},offset:{type:Array,default:()=>[14,14],validator:We},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...na],setup(e,{slots:s,emit:t,attrs:n}){let l,d;const f=$e(),{proxy:{$q:i}}=f,m=Q(null),p=Q(!1),P=V(()=>ee(e.anchor,i.lang.rtl)),k=V(()=>ee(e.self,i.lang.rtl)),E=V(()=>e.persistent!==!0),{registerTick:y,removeTick:g}=ze(),{registerTimeout:b,removeTimeout:v}=la(),{transition:w,transitionStyle:_}=Ge(e,p),{localScrollTarget:F,changeScrollEvent:me,unconfigureScrollTarget:ce}=Ke(e,B),{anchorEl:C,canShow:fe,anchorEvents:$}=Ze({showing:p,configureAnchorEl:_e}),{show:pe,hide:D}=ia({showing:p,canShow:fe,handleShow:ge,handleHide:we,hideOnRouteChange:E,processOnMount:!0});Object.assign($,{delayShow:he,delayHide:ye});const{showPortal:R,hidePortal:N,renderPortal:ve}=Je(f,m,Ce);if(i.platform.is.mobile===!0){const u={anchorEl:C,innerRef:m,onClickOutside(S){return D(S),S.target.classList.contains("q-dialog__backdrop")&&Le(S),!0}},H=V(()=>e.modelValue===null&&e.persistent!==!0&&p.value===!0);A(H,S=>{(S===!0?Ye:Y)(u)}),G(()=>{Y(u)})}function ge(u){g(),v(),R(),y(()=>{d=new MutationObserver(()=>L()),d.observe(m.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),L(),B()}),l===void 0&&(l=A(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,L)),b(()=>{R(!0),t("show",u)},e.transitionDuration)}function we(u){g(),v(),N(),j(),b(()=>{N(!0),t("hide",u)},e.transitionDuration)}function j(){d!==void 0&&(d.disconnect(),d=void 0),l!==void 0&&(l(),l=void 0),ce(),K($,"tooltipTemp")}function L(){const u=m.value;C.value===null||!u||Xe({el:u,offset:e.offset,anchorEl:C.value,anchorOrigin:P.value,selfOrigin:k.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function he(u){if(i.platform.is.mobile===!0){ae(),document.body.classList.add("non-selectable");const H=C.value,S=["touchmove","touchcancel","touchend","click"].map(W=>[H,W,"delayHide","passiveCapture"]);Z($,"tooltipTemp",S)}b(()=>{pe(u)},e.delay)}function ye(u){v(),i.platform.is.mobile===!0&&(K($,"tooltipTemp"),ae(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),b(()=>{D(u)},e.hideDelay)}function _e(){if(e.noParentEvent===!0||C.value===null)return;const u=i.platform.is.mobile===!0?[[C.value,"touchstart","delayShow","passive"]]:[[C.value,"mouseenter","delayShow","passive"],[C.value,"mouseleave","delayHide","passive"]];Z($,"anchor",u)}function B(){if(C.value!==null||e.scrollTarget!==void 0){F.value=xe(C.value,e.scrollTarget);const u=e.noParentEvent===!0?L:D;me(F.value,u)}}function be(){return p.value===!0?J("div",{...n,ref:m,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,_.value],role:"complementary"},ua(s.default)):null}function Ce(){return J(Ue,{name:w.value,appear:!0},be)}return G(j),Object.assign(f.proxy,{updatePosition:L}),ve}});const fa=x("Confirm Identity"),pa=x(" When making sensitive changes to your account, we ask you to login again if it's been a while. "),va={__name:"ReauthenticateDialog",setup(e){const{isReauthenticating:s,form:t,validationErrors:n,login:l,hasErrors:d,errors:f,loading:i,resetForm:m,attemptSetEmailOnForm:p}=oa();s.value=!0;const P=Q();p();async function k(){await l(),d.value||P.value.hide()}return(E,y)=>(c(),h(le,{ref_key:"dialogComponent",ref:P,onHide:o(m),onShow:o(p)},{default:r(()=>[a(de,{style:{"max-width":"300px"},class:"full-width"},{default:r(()=>[a(I,null,{default:r(()=>[a(M,null,{default:r(()=>[fa]),_:1}),a(U,{icon:"question_mark",color:"primary",size:"sm",round:"",flat:""},{default:r(()=>[a(ca,{class:"bg-primary","max-width":"300px",style:{"font-size":"1.2em"},anchor:"bottom right",self:"top right"},{default:r(()=>[pa]),_:1})]),_:1})]),_:1}),a(ie,null,{default:r(()=>[a(ra,{email:o(t).email,"onUpdate:email":y[0]||(y[0]=g=>o(t).email=g),password:o(t).password,"onUpdate:password":y[1]||(y[1]=g=>o(t).password=g),"validation-errors":o(n)},null,8,["email","password","validation-errors"]),o(d)?(c(),h(ue,{key:0,errors:o(f)},null,8,["errors"])):T("",!0)]),_:1}),a(U,{class:"full-width",label:"Login",color:"primary",loading:o(i),onClick:k},null,8,["loading"])]),_:1})]),_:1},8,["onHide","onShow"]))}};var ga=()=>{const{form:e,update:s,loading:t,errors:n,hasErrors:l,validationErrors:d,hasValidationErrors:f,requiresReauthentication:i,resetErrors:m,resetForm:p}=Ve();return{update:s,form:e,resetForm:p,loading:t,requiresReauthentication:i,errors:n,hasErrors:l,validationErrors:d,hasValidationErrors:f,resetErrors:m}};const wa=x("Change Password"),ha={key:0},ya={__name:"UpdatePasswordDialog",setup(e){var b;const s=Q(),{form:t,loading:n,requiresReauthentication:l,errors:d,hasErrors:f,update:i,validationErrors:m,hasValidationErrors:p,resetErrors:P,resetForm:k}=ga();async function E(){P(),await i(),f.value||s.value.hide()}const{user:y}=Oe();typeof t.value.email=="string"&&((b=y.value)==null?void 0:b.email)&&(t.value.email=y.value.email);const g=Q(!1);return l!==void 0&&A(l,v=>{v&&(g.value=!0)}),(v,w)=>(c(),h(le,ne({ref_key:"dialogComponent",ref:s},v.$attrs,{onHide:o(k)}),{default:r(()=>[a(de,null,{default:r(()=>[a(I,null,{default:r(()=>[a(M,null,{default:r(()=>[wa]),_:1}),qe(a(U,{icon:"close",round:"",flat:""},null,512),[[ea]])]),_:1}),a(ie,null,{default:r(()=>[a(ma,{email:o(t).email,"onUpdate:email":w[0]||(w[0]=_=>o(t).email=_),"current-password":o(t).current_password,"onUpdate:current-password":w[1]||(w[1]=_=>o(t).current_password=_),password:o(t).password,"onUpdate:password":w[2]||(w[2]=_=>o(t).password=_),"password-confirmation":o(t).password_confirmation,"onUpdate:password-confirmation":w[3]||(w[3]=_=>o(t).password_confirmation=_),"validation-errors":o(m)},null,8,["email","current-password","password","password-confirmation","validation-errors"]),o(p)?T("",!0):(c(),se("div",ha,[a(ue,{errors:o(d)},null,8,["errors"])]))]),_:1}),a(U,{label:"update",loading:o(n),class:"full-width",color:"primary",onClick:E,onContextmenu:w[4]||(w[4]=De(_=>g.value=!0,["prevent"]))},null,8,["loading"]),o(l)!==void 0?(c(),h(va,{key:0,modelValue:g.value,"onUpdate:modelValue":w[5]||(w[5]=_=>g.value=_)},null,8,["modelValue"])):T("",!0)]),_:1})]),_:1},16,["onHide"]))}},_a={},ba=x(" Change Password ");function Ca(e,s){return c(),h(oe,ne({clickable:""},e.$attrs),{default:r(()=>[a(q,{side:""},{default:r(()=>[a(te,{name:"key"})]),_:1}),a(q,null,{default:r(()=>[ba]),_:1})]),_:1},16)}var Pa=da(_a,[["render",Ca]]),ka=()=>{const e=He(),{logout:s,loading:t}=Ae();async function n(){await s(),e.push("/login")}return{logout:s,loading:t,onLogoutClicked:n}};const Ea=x(" Logout "),Sa={__name:"LogoutItem",setup(e){const{loading:s,onLogoutClicked:t}=ka();return(n,l)=>(c(),h(oe,{clickable:"",onClick:o(t)},{default:r(()=>[a(q,{side:""},{default:r(()=>[o(s)?(c(),h(Ie,{key:1,size:"sm",color:"primary"})):(c(),h(te,{key:0,name:"logout"}))]),_:1}),a(q,null,{default:r(()=>[Ea]),_:1})]),_:1},8,["onClick"]))}},Ta={__name:"AccountMenu",setup(e){const s=Q(!1);return(t,n)=>(c(),se(Me,null,[a(aa,{"auto-close":""},{default:r(()=>[a(re,null,{default:r(()=>[a(Sa),a(Pa,{onClick:n[0]||(n[0]=l=>s.value=!0)})]),_:1})]),_:1}),a(ya,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=l=>s.value=l)},null,8,["modelValue"])],64))}},Qa=x(" Menu "),ja={__name:"AuthenticatedLayout",setup(e){const s=Q(!1),t=Fe(),n=t.charAt(0).toUpperCase()+t.slice(1);function l(){s.value=!s.value}return(d,f)=>{const i=Re("router-view");return c(),h(Pe,{view:"lHh Lpr lFf"},{default:r(()=>[a(ke,{class:"bg-white text-grey-9",elevated:""},{default:r(()=>[a(I,null,{default:r(()=>[a(U,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:l}),a(M,null,{default:r(()=>[x("Quasar "+Ne(n))]),_:1}),a(U,{icon:"person",round:"",flat:""},{default:r(()=>[a(Ta)]),_:1})]),_:1})]),_:1}),a(Ee,{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=m=>s.value=m),"show-if-above":"",bordered:""},{default:r(()=>[a(re,null,{default:r(()=>[a(Te,{header:""},{default:r(()=>[Qa]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Se,null,{default:r(()=>[a(i)]),_:1})]),_:1})}}};export{ja as default};
