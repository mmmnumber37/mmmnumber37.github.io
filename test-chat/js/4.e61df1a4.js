(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0a84":function(e,t,a){"use strict";var s=a("6411"),n=a.n(s);n.a},"4e44":function(e,t,a){"use strict";var s=a("5e10"),n=a.n(s);n.a},"5e10":function(e,t,a){},6411:function(e,t,a){},ab55:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{class:["chat",{chat_loading:e.loading}]},[e.loading?e._e():[a("div",{staticClass:"chat__wrapper-chat"},e._l([].concat(e.messages).reverse(),(function(t,s){return a("chat-message",{key:t.id+"-"+s,attrs:{message:t,"author-incoming-message":e.authorIncomingMessage,"author-outgoing-message":e.authorOutgoingMessage}})})),1),a("div",{staticClass:"chat__wrapper-footer"},[a("chat-footer",{attrs:{"last-message-id":e.lastMessageId,"author-outgoing-message":e.authorOutgoingMessage}})],1)],e.loading?a("q-spinner",{attrs:{size:"3em",color:"primary"}}):e._e()],2)},n=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c5f6"),a("7514"),a("9523")),o=a.n(r),c=a("2f62"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat-footer"},[a("q-input",{staticClass:"chat-footer__input",attrs:{borderless:"",autogrow:"",type:"textarea",disable:e.sending,placeholder:"Введите текст..."},model:{value:e.message,callback:function(t){e.message="string"===typeof t?t.trim():t},expression:"message"}}),a("q-btn",{staticClass:"chat-footer__send",attrs:{color:"primary",icon:"send",disable:e.sending,loading:e.sending},on:{click:e.sendMessage}})],1)},u=[],g=a("a34a"),l=a.n(g),m=(a("551c"),a("96cf"),a("c973")),f=a.n(m),p=a("bd4c");function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"ChatFooter",props:{lastMessageId:{type:Number,default:0},authorOutgoingMessage:{type:String,default:""}},data:function(){return{message:"",sending:!1}},methods:d(d({},Object(c["b"])(["addMessage"])),{},{sendMessage:function(){var e=this;return f()(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.message){t.next=13;break}return e.sending=!0,t.next=4,new Promise((function(e){return setTimeout(e,1e3)}));case 4:return t.prev=4,t.next=7,e.addMessage({chatId:Number(e.$route.params.id),message:{id:e.lastMessageId+1,author:e.authorOutgoingMessage,text:e.message,created:p["a"].formatDate(Date.now(),"YYYY-MM-DD HH:mm")}});case 7:e.message="",t.next=12;break;case 10:t.prev=10,t.t0=t["catch"](4);case 12:e.sending=!1;case 13:case"end":return t.stop()}}),t,null,[[4,10]])})))()}})},O=b,v=(a("ec31"),a("2877")),_=a("27f9"),y=a("9c40"),j=a("eebe"),w=a.n(j),M=Object(v["a"])(O,i,u,!1,null,"a9e46fc4",null),P=M.exports;w()(M,"components",{QInput:_["a"],QBtn:y["a"]});var x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:["chat-message",{"chat-message_theme_incoming":e.authorIncomingMessage===e.message.author,"chat-message_theme_outgoing":e.authorOutgoingMessage===e.message.author}]},[a("div",{staticClass:"chat-message__text"},[e._v(e._s(e.message.text))]),a("div",{staticClass:"chat-message__info"},[a("span",{staticClass:"chat-message__name"},[e._v(e._s(e.message.author))]),a("span",{staticClass:"chat-message__time"},[e._v(e._s(e.message.created))])])])},C=[],D={name:"ChatMessage",props:{message:{type:Object,default:function(){return{}}},authorIncomingMessage:{type:String,default:""},authorOutgoingMessage:{type:String,default:""}}},I=D,k=(a("4e44"),Object(v["a"])(I,x,C,!1,null,"47d9be0b",null)),S=k.exports;function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q={name:"PageIndex",components:{ChatMessage:S,ChatFooter:P},data:function(){return{loading:!0}},computed:$($({},Object(c["c"])(["chats"])),{},{messages:function(){var e=this;return this.chats.find((function(t){return t.id===Number(e.$route.params.id)})).parts},authorIncomingMessage:function(){return this.messages[0].author},authorOutgoingMessage:function(){var e=this;return this.messages.filter((function(t){return t.author!==e.authorIncomingMessage}))[0].author},lastMessageId:function(){return this.messages[this.messages.length-1].id}}),watch:{"$route.params.id":function(){this.loading=!0}},mounted:function(){var e=this;setTimeout((function(){e.loading=!1}),1e3)},updated:function(){var e=this;setTimeout((function(){e.loading=!1}),1e3)}},Q=q,Y=(a("0a84"),a("9989")),N=a("0d59"),T=Object(v["a"])(Q,s,n,!1,null,"569b2428",null);t["default"]=T.exports;w()(T,"components",{QPage:Y["a"],QSpinner:N["a"]})},bc20:function(e,t,a){},ec31:function(e,t,a){"use strict";var s=a("bc20"),n=a.n(s);n.a}}]);